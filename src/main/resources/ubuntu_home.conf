// to be started with -Dconfig.resource=ubuntu_desktop.conf

include "application"

arcite {
  home = /media/bernitu/research/arcite/${arcite.home_name}
  snapshot = ${arcite.home}/${arcite.snapshot_name}
  logs = ${arcite.home}/logs
  file_service {
    snapshot = ${arcite.home}/${arcite.file_service.snapshot_name}
  }

  mounts = [
    {name = "test1", description = "to test data transfer", path = "/media/bernitu/research/arcite/raw_data_test"},
    {name = "microarray1", description = "agilent microarray scanner", path = "/media/deffabe1/DATA/microarrays/raw_data"},
    {name = "microarray2", description = "illumina microarray scanner", path = "/media/deffabe1/DATA/microarrays/raw_data"},
    {name = "catwalk", description = "catwalk machine ", path = "/media/deffabe1/DATA/catwalk"}
  ]
}

http {
  host = "127.0.0.1"
  port = 8084
}

akka {
  remote.netty.tcp {
    hostname = "127.0.0.1"      # external (logical) hostname
    port = 5555
    # external (logical) port
  }
}

transform_worker {
  akka {

    actor.provider = "akka.cluster.ClusterActorRefProvider"

    remote.netty.tcp.port = 0
    remote.netty.tcp.hostname = 127.0.0.1

  }
  contact-points = [
    "akka.tcp://ArcTransfActClustSys@127.0.0.1:3551",
    "akka.tcp://ArcTransfActClustSys@127.0.0.1:3552"]
}

transform_cluster {
  akka {

    actor.provider = "akka.cluster.ClusterActorRefProvider"

    remote.netty.tcp.port = 0
    remote.netty.tcp.hostname = 127.0.0.1

    remote.netty.tcp.bind-hostname = "0.0.0.0" # internal (bind) hostname


    cluster {
      seed-nodes = [
        "akka.tcp://ArcTransfActClustSys@127.0.0.1:3551",
        "akka.tcp://ArcTransfActClustSys@127.0.0.1:3552"]

      auto-down-unreachable-after = 10s
    }

    extensions = ["akka.cluster.client.ClusterClientReceptionist"]

    persistence {
      journal.plugin = "akka.persistence.journal.leveldb-shared"
      journal.leveldb-shared.store {
        # DO NOT USE 'native = off' IN PRODUCTION !!!
        native = off
        dir = "target/shared-journal"
      }
      snapshot-store.plugin = "akka.persistence.snapshot-store.local"
      snapshot-store.local.dir = "target/snapshots"
    }

    # Sigar native library extract location during tests.
    # Note: use per-jvm-instance folder when running multiple jvm on one host.
    akka.cluster.metrics.native-library-extract-folder = ${user.dir}/target/native

    # Disable legacy metrics in akka-cluster.
    akka.cluster.metrics.enabled = off

    # Enable metrics extension in akka-cluster-metrics.
    akka.extensions = ["akka.cluster.metrics.ClusterMetricsExtension"]
  }

  store = "127.0.0.1:3551/user/store"

  backends {
    ports = ["3551", "3552", "3553", "3554", "3555", "3556", "3557", "3558", "3559"]
  }

  frontends {
    numberOfports = 20
  }
}

experiments-manager {
  include "application" // todo only include the akka part for here

  akka {

    actor {
      provider = "akka.remote.RemoteActorRefProvider"
    }

    //    remote {
    enabled-transports = ["akka.remote.netty.tcp", "akka.remote.netty.NettyRemoteTransport"]

    remote {
      log-remote-lifecycle-events = on

      netty.tcp {
        hostname = "127.0.0.1"
        port = 4333
      }
    }

    uri = "akka.tcp://experiments-actor-system@127.0.0.1:4333"
  }
}

tree-of-transforms-actor-system {
  akka {
    actor {
    provider = "akka.remote.RemoteActorRefProvider"

    }

    enabled-transports = ["akka.remote.netty.tcp", "akka.remote.netty.NettyRemoteTransport"]

    remote {
      log-remote-lifecycle-events = on

      netty.tcp {
        hostname = "127.0.0.1"
        port = 4344
      }
    }

    uri = "akka.tcp://tree-of-transforms-actor-system@127.0.0.1:4344"
  }
}

meta-info-actor-system {
  akka {
    actor {
      provider = "akka.remote.RemoteActorRefProvider"

    }

    enabled-transports = ["akka.remote.netty.tcp", "akka.remote.netty.NettyRemoteTransport"]

    remote {
      log-remote-lifecycle-events = on

      netty.tcp {
        hostname = "127.0.0.1"
        port = 4345
      }
    }

    uri = "akka.tcp://meta-info-actor-system@127.0.0.1:4345"
  }
}

sharedJournal {
  port = 3551
}



